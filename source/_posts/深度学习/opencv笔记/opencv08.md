
## 8，**canny边缘检测**

canny检测步骤：
1. 去噪，噪声会影响边缘检测的准确性
    - 应用高斯滤波器去噪，一般采用5*5的核
    - 高斯滤波的特点，离中心越远权值越小
2. 计算梯度的幅度和方向
     - 梯度的方向和边缘方向是垂直的
    - 根据边缘检测算子得出的水平和垂直方向的分量，计算出梯度的幅度和方向
$$
梯度的幅度：G = \sqrt{G_x^2} +\sqrt{G_y^2}  
$$
$$
梯度的方向：\theta = arctan( \sqrt{G_x^2} ,\sqrt{G_y^2})
$$

3. 极非大值抑制，即适当的让边缘变瘦
     - 如果该点是正负梯度上的局部最大值，保留该点
     - 如果不是，则抑制该点（归零）

4. 确定边缘，使用双阈值算法确定最终的边缘信息
     - 设置两个阈值，一个为高阈值maxval,一个为低阈值minval
     - 如果当前边缘像素的梯度值大于maxval，则将当前边缘标记为强边缘
     - 如果当前边缘像素梯度值介于maxval和minval之间，则将当前边缘像素标记为虚边缘
     - 如果小于minval，则抑制但钱边缘像素
     - 与强边缘相连，则将该边缘标记为边缘
     - 与强边缘无连接，则将该边缘抑制

### **canny函数及使用**
  
`edges = cv.Canny(image ,threshold1, threshold2, apertureSize, L2gradient)`
     - threshold1第一个阈值
     - threshold2第二个阈值
     - apertureSize表示sobel孔径的大小
     - L2gradient计算梯度幅度的标识

