# opencv基础

[返回readme](../readme.md)


## 图像处理基础

### 图像的表示

  二值图像：仅仅包含黑色和白色两种颜色的图像，黑色表示为0，白色表示为1。

  灰度图像：包含256个灰度级，数值区间[0,255]，其中 0 表示纯黑色， 255表示纯白色，中间数值表示纯白和纯黑之间的不同极度的灰度。

  彩色图像： 有红绿蓝三个颜色的通道，能表现更丰富的细节信息，图像的通道顺序是RGB；特别注意，opencv中通道的顺序是 BGR，和图片通道顺序相反
<!--more-->
### 像素处理

  [像素处理代码实现](opencv/像素处理.py)

### 使用numpy.array访问元素

  [代码实现](opencv/numpy.array访问元素.py)
  
  函数 item(行，列) 能高效访问图像的像素点
  itemset(索引值，新值) 用来修改像素值

### 感兴趣区域ROI 和 通道操作

  [代码实现](opencv/ROI.py)

  设定ROI后，就可以对该区域进行整体操作，比如将一个ROI区域A复制给变量b，然后将该变量复制给另一个区域C

  通道拆分 cv.split(img)

  通道合并 cv.merge([b,g,r])

### 获取图像属性

  img.shape 返回包含行数，列数，通道数的数组

  img.size  返回图像的像素数目

  img.dtype 返回图像的数据类型

## 图像运算

### 加法

  img1 + img2 ,遵循规则：
  a+b = (a+b) % 256,即结果对256取膜

  cv2.add(img1,img2) ,遵循规则：
  a+b = min(a+b,255), 即和大于255时结果取255

### 图像加权和

  dst = cv2.addWeighted(src1,alpha,src2,beta,gamma) 参数不能省略
  结果就是 dst = src * alpha +src2 *beta +gamma

  加权和超过255，结果同样取255

### 按位逻辑运算

  cv2.bitwise_and() 与
  cv2.bitwise_or()  或
  cv2.bitwise_xor() 异或
  cv2.bitwise_not() 非

  跟 0 位与结果为 0 ，变成黑色
  跟255位与结果是本身 ，颜色不变

### 掩膜

  使用掩膜参数时，操作只会在掩膜值为非空的像素点上执行，并将其他像素点的值设置为0

### 图像与数值运算

  cv2.add(img,6) 参与运算的既可以是图片也可以是数值

### 位平面分解

  将同一比特位上的二进制像素值进行组合，得到一副二进制值图像，该图像被称为灰度图像的一个位平面，这个过程被称为位平面分解。
  在8位灰度图中，可以组成8个二进制图像
  [代码](opencv/位平面.py)

### 图像加密和解密

  通过按位异或运算可以实现图像的加密和解密

  通过对原始图像与秘钥图像进行按位异或就可以进行加密，将加密后的图像与秘钥图像再次进行按位异或就可以进行解密

  [代码实现](opencv/图像加密和解密.py)

### 数字水印

  最低有效位指一个二进制中的第0位，由于二进制图像处于载体图像的最低有效位上面，所以对于载体图像的影响非常不明显，具有较高的隐蔽性。

  在必要时，我们可以直接将载体图像中的最低有效位提取出来，即可得到嵌入该位上的二值图像，达到提取秘密信息的目的。
  这种信息隐藏也被称为数字水印，通过该方式可以实现信息影藏，版权认证，身份认证等功能

  分两步：
    
    嵌入过程
      用数字水印信息将图像的最低有效位替换掉
    
    提取过程
      提取出最低有效位的水印信息即可

  [demo](opencv/数字水印.py)

### 脸部打码以及解码

  使用掩码和按位运算方式实现对脸部打码和解码实例
  [demo](opencv/脸部打码以及解码.py)

## 色彩空间类型转换

  色彩空间类型转换就是将图像的一个色彩空间转换到另一个色彩空间，比如opencv处理图像是，可能会在RGB色彩空间和HSV色彩空间之间进行转换。在进行特征提取计算距离时，，往往会将图像RGB色彩空间转换成灰度色彩空间，也可能要将色彩空间的图像转换成二值图像

### 色彩空间基础

  比较常见的色彩空间：
  
  - GRAY色彩空间，也叫灰度空间 ，与RGB色彩空间的转换关系式 ： `GRAY =0.299×R +0.587*G +0.114*B`
  - XYZ色彩空间，一中便于计算的色彩空间
  - YCrCb色彩空间
  - HSV色彩空间：一种面向视觉感知的颜色模型；从心理学和视觉感知的角度出发，指出人眼的色彩和知觉主要包括三要素：色调Hue，饱和度Saturation,亮度Value
  - HLS色彩空间： 包括三要素，色调Hue,光亮度lightness,饱和度Saturation


### 类型转换函数、HSV色彩空间讨论、alpha通道

  [demo](oepncv/类型转换.py)
  
  dst = cv2.cvtColor(src,code,[,dstcn])
  
    code表示色彩空间转换码
    dstCn目标图像的通道数，如果为默认的零，则通道数自动通过原始输入图像和code得到

  alpha通道：在BGR色彩空间三个通道的基础上，还可以添加一个A通道，也叫做alpha通道，表示透明度。这四个通道的色彩空间也被称为BGRA色彩空间，png图像是一种典型的4通道图像。A的值范围[0,255]，从透明到不透明，默认值为255，即100%不透明
  


## **几何变换**

### **缩放**

  ```md
  dst = cv.resize(src,dsize , fx,fy,interpolation)
    src:缩放的原始图像
    dsize：输出图像大小
    fx：水平方向的缩放比例
    fy:垂直方向的缩放比例
    interpolation：代表插值方式
      缩放图像时，INTER_AREA能达到最好效果
      放大图像时，INTER_CUBIC 和INTER_LINEAR 都能取得较好的效果  
  ```
  

### **旋转**

  ```
  dst = cv2.flip(src,flipCode)
    flipCode 旋转类型：
    0，绕x轴旋转
    正数，绕y轴旋转
    负数，绕x，y同时旋转
  ```

### **仿射**

  仿射变换是指图像可以通过一系列的几何变换来实现平移、旋转等多种操作

  该变换能够保持图像的平直性和平行性
  
  仿射 = 平移 + 旋转 

```md
  dst = cv2.warpAffine(src, M, dsize, flags, borderMode, borderValue)
  M:代表一个2x3的变换矩阵
  dsize:代表输出图像的尺寸大小
  flags:代表插值方式，默认INTER_LINEAR
  borderMode:代表边类型

  borderValue:代表边界值，默认0
  ```
  
### **透视**

### **重映射**

## **阈值处理**

### **threldhold函数**

### **自适应阈值处理**

### **otsu处理**

## **图像平滑处理**

### **均值滤  波**

### **方框滤波**

### **高斯滤波**

### **中值滤波**

### **双边滤波**

### **2D 卷积**

## **形态学操作**

### **腐蚀**

### **膨胀**

### **通用形态学函数**

### **开运算**

### **闭运算**

### **形态学梯度运算**

### **礼貌运算**

### **黑帽运算**

### **核函数**

## **图像梯度**

### **sobel 理论基础**

### **sobel算子及函数使用**

### **scharr 算子及函数使用**

### **Laplacian 算子及函数使用**

### **算子总结**

## **canny边缘检测**

### **canny边缘检测理论**

### **canny函数及使用**

## **图像金字塔**

### **理论基础**

### **pyrDown函数及使用**

### **采样可逆行研究**

### **拉普拉斯金字塔**

## **图像轮廓**

### **查找并绘制轮廓**

### **矩特征**

### **hu钜**

### **轮廓拟合**

### **凸包**

### **利用形状场景算法比较轮廓**

### **轮廓的特征值**

## **傅里叶变换**

### **理论基础**

### **实现**

## **模板匹配**

### **模板匹配基础**

### **多模板匹配**

## **霍夫变换**

### 霍夫直线变换

### **霍夫圆形变换**

## **图像分割与提取**

### **用分水岭算法实现图像分割**

### **交互式前景提取**

## **视频处理**

### **VideoCapture类**

### **ViedeoWriter类**

### **视频操作基础**

## **绘图机交互**

### **绘图基础**

### **鼠标交互**

### **滚动条**

## **k近邻算法**

### **理论基础**

### **计算**

### **手写数字识别原理**

### **自定义函数手写数字识别**

### **k近邻模块的基本使用**

### **K 近邻手写板数字的识别**
K
K**
K
K*
K
### **svm案例介绍**

## **k均值聚类**

